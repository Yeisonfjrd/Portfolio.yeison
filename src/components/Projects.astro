---
import ProjectCard from "./ProjectCard.astro";
import { getProjects } from "@/lib/supabase";

const projects = await getProjects();

const fallbackProjects = projects.length > 0 ? projects : [
  {
    id: 1,
    title: "RoadEra",
    description: "Este sitio web es perfecto para alquileres de coches de lujo. Los usuarios pueden registrarse e iniciar sesión para navegar por los coches disponibles, mientras que los administradores pueden añadir, editar y gestionar los listados de vehículos. Los clientes pueden reservar coches fácilmente con actualizaciones de disponibilidad en tiempo real y pagos seguros a través de Stripe. La plataforma cuenta con un panel intuitivo que permite a los administradores realizar un seguimiento de las reservas y gestionar los precios. Construido con una base de datos robusta, garantiza un rendimiento fluido, almacenando perfiles de usuario, historial de alquileres y detalles de transacciones. Con un diseño elegante y compatible con dispositivos móviles, ¡este sitio hace que alquilar coches de alta gama sea simple, seguro y conveniente!",
    image: "https://pojsouizkkvpmzknwpwc.supabase.co/storage/v1/object/public/Images//926shots_so.png",
    tags: ["TYPESCRIPT", "JAVASCRIPT", "CSS"],
    link: "https://rental-cars-three.vercel.app/",
    github: "https://github.com/Yeisonfjrd/rental-cars",
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString()
  },
  {
    id: 2,
    title: "Tesla Clone",
    description: "Página interesante de desarrollar: es un clon del sitio web oficial de Tesla. Me llamaron la atención sus animaciones, el botón del encabezado, la suave transición de colores en el encabezado y el desplazamiento de la página. Fue un desafío recrear el JavaScript para que se pareciera lo más posible al sitio oficial.",
    image: "/projects/tesla.webp",
    tags: ["JavaScript", "HTML", "CSS"],
    link: "https://copytesla.netlify.app/",
    github: "https://github.com/Yeisonfjrd/Clon-tesla",
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString()
  },
  {
    id: 3,
    title: "X (Twitter) Clone",
    description: "Es un clon de Twitter, ahora llamado X. En este proyecto, desarrollé una base de datos funcional que admite el registro e inicio de sesión de usuarios, la gestión de sesiones con funcionalidad de cierre de sesión y la capacidad de interactuar con las publicaciones agregando comentarios.",
    image: "/projects/twitter.webp",
    tags: ["JavaScript", "Node.js", "MongoDB"],
    link: "https://x-json-kha7.vercel.app/",
    github: "https://github.com/Yeisonfjrd/Xjson",
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString()
  }
];

const featuredProjects = fallbackProjects.slice(0, 3);
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8">
  {
    featuredProjects.map((project, index) => (
      <ProjectCard 
        title={project.title}
        description={project.description}
        image={project.image}
        tags={project.tags}
        link={project.link}
        github={project.github}
        index={index}
      />
    ))
  }
</div>

<div class="flex justify-center mt-12">
  <a 
    href="/proyectos" 
    class="group inline-flex items-center gap-2 px-6 py-3 text-lg font-medium transition-all duration-300 rounded-full
    bg-gradient-to-r from-violet-600 to-indigo-600 text-white hover:from-violet-700 hover:to-indigo-700
    focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 dark:focus:ring-offset-slate-900 shadow-[0_0_15px_rgba(139,92,246,0.5)]"
  >
    Ver todos los proyectos
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      class="size-5 transition-transform duration-300 group-hover:translate-x-1" 
      viewBox="0 0 24 24" 
      fill="none" 
      stroke="currentColor" 
      stroke-width="2" 
      stroke-linecap="round" 
      stroke-linejoin="round"
    >
      <path d="M5 12h14"></path>
      <path d="m12 5 7 7-7 7"></path>
    </svg>
  </a>
</div>